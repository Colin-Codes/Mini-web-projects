<script>
    function IsPalindrome(){
        var cleaned=document.getElementById("palindromeInput").value.replace(/[\W_]/g,"").toLowerCase();
        var length=cleaned.length;
        var isPalindrome=true;
        if(length==0){
            return '';
        }
        for(var i=0;i<length;i+=1){
            if(i>length/2){
                break;
            }
            if(cleaned[i]!=cleaned[length-1-i]){
                isPalindrome=false;
                break;
            }
        }
        return '<i class="fas fa-' + (isPalindrome ? 'check' : 'times') + '-circle" style="font-size:30px; color:' + (isPalindrome ? '#2ec02e' : 'red') + '"></i>';
    }

    function AnalysePalindrome(){
        var cleaned=document.getElementById("palindromeInput").value.replace(/[\W_]/g,"");
        var lowered = cleaned.toLowerCase();
        var length=lowered.length;
        var analysedPalindrome="";
        var count=0;
        var color="#2ec02e";
        if(lowered.length==0){
            analysedPalindrome='<div style="color:'+color+'">Is your name a palindrome?</div>'
        }
        else {
            for(var i=0;i<length;i+=1){
                color="#2ec02e";
                if(lowered[i]!=lowered[length-1-i]){
                    color="red"
                }
                else{
                    count+=1
                }
                analysedPalindrome+='<span style="color:'+color+'">'+cleaned[i]+'</span>'
            }
            var percent=(count*100/length).toFixed(0);
            analysedPalindrome+='<div style="color:'+color+'">'+percent+'% Palindromicity'+(percent=="100"?'!':' :-(')+'</div>'
        }
        return analysedPalindrome
    }

    function CheckPalindrome(){
        document.getElementById("palindromeCheck").innerHTML=IsPalindrome();
        document.getElementById("palindromeAnalysis").innerHTML=AnalysePalindrome()
    }
</script>


<div class="container container-fluid text-center" style="margin:20px">
    <div class="form-group row">
        <input class="col form-control form-control-lg text-center" type="text" id="palindromeInput" placeholder="Enter name here...">
    </div>
    <div class="form-group row">
        <div class="col" id="palindromeCheck"></div>
    </div>
    <div class="row">
        <p class="col-md-12 text-center" style="font-size:30px" id="palindromeAnalysis"></p>
    </div>
</div>

<script>
    CheckPalindrome();
    document.getElementById("palindromeInput").addEventListener("keyup",function(event){
        event.preventDefault();
        CheckPalindrome()
    });
</script>