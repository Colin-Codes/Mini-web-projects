<script>
    // This is an efficient function to quickly check if the input field contains a palindrome
    function IsPalindrome() {
        // Grab the text from the input field and clean out whitespace and special chars using regex. convert to lower case
        var cleaned = document.getElementById("palindromeInput").value.replace(/[\W_]/g, "").toLowerCase();
        // Storing the length in a variable is not necessary but makes ny code less verbose
        var length = cleaned.length;
        // I have decided to consider empty strings as non-palindromic
        if (length == 0) {
            return false;
        }
        // Iterate over the characters to check that each character matches it's mirrored counterpart
        for (var i=0; i<length; i++) {
            // If we're over halfway, the remaining work only duplicates the work already completed, so quit
            if (i > length/2) {
                return true;
            }
            // This is the actual check - note the return - if we find a non-matching pair, no further checks are required
            // Note the -1 as the length is 1-indexed and the position is 0-indexed
            if (cleaned[i] != cleaned[length - 1 - i]) {
                return false;
            }
        }
        // If we find no non-matching pairs, then it must be a palindrome!
        return true;
    }

    // This function is simiilar, with minor differences highlighted below:
    function AnalysePalindrome() {
        var cleaned = document.getElementById("palindromeInput").value.replace(/[\W_]/g, "").toLowerCase();
        var length = cleaned.length
        // String to store the analysed results
        var analysedPalindrome = "";
        // Counter to calculate percentage palindromicity
        var count = 0;
        // Default green color (this one has better contrast than CSS green)
        var color = "#2ec02e";
        // If empty, give a call to action
        if (length == 0) {
            analysedPalindrome = '<div style="color:' + color + '">Is your name palindromic?</div>';
        }
        // Otherwise analyse the palindrome
        else {
            // Highlight each character as green (matching) or red (non-matching) for display to the user 
            for (var i=0; i<length; i++) {
                // Set the color back to the default green each time as a fail-safe measure
                color = "#2ec02e";
                // Set color to red if the characters fail to match 
                if (cleaned[i] != cleaned[length - 1 - i]) {
                    color = "red";
                }
                // Otherwise increment the counter
                else {                
                    count += 1;
                }
                // Put this together into a html output
                analysedPalindrome += '<span style="color:' + color + '">' + cleaned[i] + '</span>';
            }
            // Use the count and length to display a percentage 
            var percent = (count*100/length).toFixed(0)
            analysedPalindrome += '<div style="color:' + color + '">' + percent + '% Palindromicity' + (percent == "100" ? '!' : ' :-(') + '</div>'
        }        
        return analysedPalindrome;
    }

    // Run both functions together, assing to UI elements
    function CheckPalindrome() {
        document.getElementById("palindromeStatus").checked = IsPalindrome()
        document.getElementById("palindromeAnalysis").innerHTML = AnalysePalindrome()
    }
</script>

<!-- UI elements -->
<input type="text" id="palindromeInput" placeholder="Enter name here...">
<input type="checkbox" id="palindromeStatus" name="palindromeStatus" value="palindromeStatus" disabled>
<p id="palindromeAnalysis"></p>

<script>
    // Run the scripts once on first visiting the page
    CheckPalindrome(); 
    // Listen for further editing of the text input box, refresh UI elements each time by by calling the scripts again
    document.getElementById("palindromeInput").addEventListener("keyup", function(event) {
        event.preventDefault();
        CheckPalindrome();
    });
</script>