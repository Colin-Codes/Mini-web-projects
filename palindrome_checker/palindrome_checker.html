<script>
    function IsPalindrome() {
        var cleaned = document.getElementById("palindromeInput").value.replace(/[\W_]/g, "").toLowerCase();
        var length = cleaned.length;
        if (cleaned.length == 0) {
            return false;
        }
        var isPalindrome = true;
        for (var i=0;i<length;i++) {
            if (i > length/2) {
                break;
            }
            if (cleaned[i] != cleaned[length - 1 - i]) {
                isPalindrome = false;
                break;
            }
        }
        return isPalindrome;
    }

    function AnalysePalindrome() {
        var cleaned = document.getElementById("palindromeInput").value.replace(/[\W_]/g, "").toLowerCase();
        var length = cleaned.length
        var analysedPalindrome = "";
        var count = 0;
        var color = "#2ec02e";
        if (cleaned.length == 0) {
            analysedPalindrome = '<div style="color:' + color + '">Is your name palindromic?</div>';
        }
        else {
            for (var i=0;i<length;i++) {
                color = "#2ec02e";
                if (cleaned[i] != cleaned[length - 1 - i]) {
                    color = "red";
                }
                else {                
                    count += 1;
                }
                analysedPalindrome += '<span style="color:' + color + '">' + cleaned[i] + '</span>';
            }
            var percent = (count*100/length).toFixed(0)
            analysedPalindrome += '<div style="color:' + color + '">' + percent + '% Palindromicity' + (percent == "100" ? '!' : ' :-(') + '</div>'
        }        
        return analysedPalindrome;
    }

    function CheckPalindrome() {
        document.getElementById("palindromeStatus").checked = IsPalindrome()
        document.getElementById("palindromeAnalysis").innerHTML = AnalysePalindrome()
    }
</script>
<input type="text" id="palindromeInput" placeholder="Enter name here...">
<input type="checkbox" id="palindromeStatus" name="palindromeStatus" value="palindromeStatus" disabled>
<p id="palindromeAnalysis"></p>
<script>
    CheckPalindrome(); 
    document.getElementById("palindromeInput").addEventListener("keyup", function(event) {
        event.preventDefault();
        CheckPalindrome();
    });
</script>